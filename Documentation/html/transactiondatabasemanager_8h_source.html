<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.18"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Main server: Исходный файл Database/transactiondatabasemanager.h</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Main server
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Создано системой Doxygen 1.8.18 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Поиск');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Поиск');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d00f5e20d7b27686287f9c84bc9112f8.html">Database</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">transactiondatabasemanager.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="transactiondatabasemanager_8h.html">См. документацию.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="preprocessor">#ifndef TRANSACTIONDATABASEWORKER_H</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="preprocessor">#define TRANSACTIONDATABASEWORKER_H</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="user_8h.html">user.h</a>&quot;</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="databasemanager_8h.html">databasemanager.h</a>&quot;</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespace_mafia.html">Mafia</a> {</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;    <span class="keyword">namespace </span>Database {</div>
<div class="line"><a name="l00008"></a><span class="lineno"><a class="line" href="class_mafia_1_1_database_1_1_transaction_database_manager.html">    8</a></span>&#160;        <span class="keyword">class </span><a class="code" href="class_mafia_1_1_database_1_1_transaction_database_manager.html">TransactionDatabaseManager</a> : <span class="keyword">public</span> <a class="code" href="class_mafia_1_1_database_1_1_database_manager.html">DatabaseManager</a></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;        {</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;        <span class="keyword">public</span>:</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;            <a class="code" href="class_mafia_1_1_database_1_1_transaction_database_manager.html#ad656f78044b12ee27f416383586558f4">TransactionDatabaseManager</a>(<a class="code" href="class_mafia_1_1_database_1_1_database_worker.html">DatabaseWorker</a>* databaseWorker);</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160; </div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;            <a class="code" href="namespace_mafia_1_1_database.html#aa032e646da93d30f80ea9a10f0488504">TransactionIdType</a> <a class="code" href="class_mafia_1_1_database_1_1_transaction_database_manager.html#a655539012fa580510df277a684209c46">add_transaction</a>(<a class="code" href="namespace_mafia_1_1_database.html#ab42c0ff51241aae191094adfd24334d1">UserIdType</a> userId, <a class="code" href="namespace_mafia_1_1_database.html#a051bcf06b615e770ba141ccc68e957e8">PriceType</a> price, <a class="code" href="namespace_mafia_1_1_database.html#a27099f0ff3ecafb2af885e198cee1495">TransactionType</a> type);</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160; </div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;            MafiaList&lt;Transaction&gt; <a class="code" href="class_mafia_1_1_database_1_1_transaction_database_manager.html#ae1d3a6574ea868afcbf1916380b44a42">get_all_transactions</a>();</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160; </div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;            <a class="code" href="struct_mafia_1_1_database_1_1_transaction.html">Transaction</a> <a class="code" href="class_mafia_1_1_database_1_1_transaction_database_manager.html#afc61bb5c35cdc92de86bace96e39edd3">get_transaction</a>(<a class="code" href="namespace_mafia_1_1_database.html#aa032e646da93d30f80ea9a10f0488504">TransactionIdType</a> <span class="keywordtype">id</span>);</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160; </div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;            MafiaList&lt;Transaction&gt; <a class="code" href="class_mafia_1_1_database_1_1_transaction_database_manager.html#a5874ef52a707346b358a816328ccaf87">get_users_transactions</a>(<a class="code" href="namespace_mafia_1_1_database.html#ab42c0ff51241aae191094adfd24334d1">UserIdType</a> buyer);</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160; </div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;            MafiaList&lt;Transaction&gt; <a class="code" href="class_mafia_1_1_database_1_1_transaction_database_manager.html#ac91e237790cb6ecb4cafb4d7f65a6205">get_time_bounded_transactions</a>(QDateTime after = <a class="code" href="namespace_mafia_1_1_database.html#a729b70e8feb11b7f1d338f870b47150a">BEGINNING_TIME</a>, QDateTime before = <a class="code" href="namespace_mafia_1_1_database.html#a0acea0d0e2de9c9b3d82f5241d5678e1">ENDING_TIME</a>);</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160; </div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;        <span class="keyword">private</span>:</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;            <span class="keywordtype">void</span> <a class="code" href="class_mafia_1_1_database_1_1_transaction_database_manager.html#aa35f53e9225e4a551fd6fa22ef48dcb5">check_transaction_hashes</a>();</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160; </div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;            <span class="keywordtype">void</span> <a class="code" href="class_mafia_1_1_database_1_1_transaction_database_manager.html#ae4f250a52ca9f1a1fe7abeb03bab7880">on_database_cracked</a>();</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160; </div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;            <a class="code" href="namespace_mafia_1_1_database.html#aa032e646da93d30f80ea9a10f0488504">TransactionIdType</a> <a class="code" href="class_mafia_1_1_database_1_1_transaction_database_manager.html#a655539012fa580510df277a684209c46">add_transaction</a>(<a class="code" href="struct_mafia_1_1_database_1_1_transaction.html">Transaction</a> transaction);</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160; </div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;            MafiaList&lt;Transaction&gt; <a class="code" href="class_mafia_1_1_database_1_1_transaction_database_manager.html#a36106fbdabbf3bb721a2dbe3f0c5e727">get_request_transactions</a>(QSqlQuery* query);</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160; </div>
<div class="line"><a name="l00082"></a><span class="lineno"><a class="line" href="class_mafia_1_1_database_1_1_transaction_database_manager.html#acdfa98f25e9e8680453aaa2e555183ce">   82</a></span>&#160;            <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="class_mafia_1_1_database_1_1_transaction_database_manager.html#acdfa98f25e9e8680453aaa2e555183ce">hashCheckingInterval</a>;</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160; </div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;        };</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    }</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;}</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160; </div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160; </div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160; </div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="preprocessor">#endif // TRANSACTIONDATABASEWORKER_H</span></div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="aclass_mafia_1_1_exceptions_1_1_exception_html_a26505358738862d28c8fd6bcd701ec11"><div class="ttname"><a href="class_mafia_1_1_exceptions_1_1_exception.html#a26505358738862d28c8fd6bcd701ec11">Mafia::Exceptions::Exception::show</a></div><div class="ttdeci">virtual void show()</div><div class="ttdoc">Функция для вывода сообщения об ошибке в случае, если ошибка все же не обработана.</div><div class="ttdef"><b>Definition:</b> exception.cpp:12</div></div>
<div class="ttc" id="anamespace_mafia_1_1_database_html_abd93af2b68471986f93b4909c04ba4c0"><div class="ttname"><a href="namespace_mafia_1_1_database.html#abd93af2b68471986f93b4909c04ba4c0">Mafia::Database::SQL_DATETIME_FORMAT</a></div><div class="ttdeci">const QString SQL_DATETIME_FORMAT</div><div class="ttdoc">Формат даты и времени, который используется везде по программе (т.к. он используется SQL)</div><div class="ttdef"><b>Definition:</b> user.h:11</div></div>
<div class="ttc" id="astruct_mafia_1_1_database_1_1_transaction_html_a540fc77986e013b16e95888369e98ae3"><div class="ttname"><a href="struct_mafia_1_1_database_1_1_transaction.html#a540fc77986e013b16e95888369e98ae3">Mafia::Database::Transaction::timestamp</a></div><div class="ttdeci">QDateTime timestamp</div><div class="ttdoc">Время и дата совершения транзакции</div><div class="ttdef"><b>Definition:</b> user.h:109</div></div>
<div class="ttc" id="aclass_mafia_1_1_database_1_1_transaction_database_manager_html_afc61bb5c35cdc92de86bace96e39edd3"><div class="ttname"><a href="class_mafia_1_1_database_1_1_transaction_database_manager.html#afc61bb5c35cdc92de86bace96e39edd3">Mafia::Database::TransactionDatabaseManager::get_transaction</a></div><div class="ttdeci">Transaction get_transaction(TransactionIdType id)</div><div class="ttdoc">Получение конкретной транзакции по id.</div><div class="ttdef"><b>Definition:</b> transactiondatabasemanager.cpp:126</div></div>
<div class="ttc" id="anamespace_mafia_1_1_database_html_a0acea0d0e2de9c9b3d82f5241d5678e1"><div class="ttname"><a href="namespace_mafia_1_1_database.html#a0acea0d0e2de9c9b3d82f5241d5678e1">Mafia::Database::ENDING_TIME</a></div><div class="ttdeci">const QDateTime ENDING_TIME</div><div class="ttdoc">Время, которое мы считаем 'самым концом' (позже него не может быть ничего)</div><div class="ttdef"><b>Definition:</b> user.h:15</div></div>
<div class="ttc" id="aclass_mafia_1_1_database_1_1_transaction_database_manager_html_a5874ef52a707346b358a816328ccaf87"><div class="ttname"><a href="class_mafia_1_1_database_1_1_transaction_database_manager.html#a5874ef52a707346b358a816328ccaf87">Mafia::Database::TransactionDatabaseManager::get_users_transactions</a></div><div class="ttdeci">MafiaList&lt; Transaction &gt; get_users_transactions(UserIdType buyer)</div><div class="ttdoc">Получение всех транзакций конкретного пользователя</div><div class="ttdef"><b>Definition:</b> transactiondatabasemanager.cpp:160</div></div>
<div class="ttc" id="anamespace_mafia_1_1_database_html_a051bcf06b615e770ba141ccc68e957e8"><div class="ttname"><a href="namespace_mafia_1_1_database.html#a051bcf06b615e770ba141ccc68e957e8">Mafia::Database::PriceType</a></div><div class="ttdeci">int PriceType</div><div class="ttdoc">Тип, используемый для хранения цены, заплаченной при транзакции</div><div class="ttdef"><b>Definition:</b> user.h:29</div></div>
<div class="ttc" id="aclass_mafia_1_1_database_1_1_database_manager_html"><div class="ttname"><a href="class_mafia_1_1_database_1_1_database_manager.html">Mafia::Database::DatabaseManager</a></div><div class="ttdoc">Базовый класс, от которого наследуются все классы для работы с конкретными БД</div><div class="ttdef"><b>Definition:</b> databasemanager.h:11</div></div>
<div class="ttc" id="aclass_mafia_1_1_system_1_1_s_h_a256_html"><div class="ttname"><a href="class_mafia_1_1_system_1_1_s_h_a256.html">Mafia::System::SHA256</a></div><div class="ttdoc">Класс хеширования с помощью алгоритма SHA 256. Скачал его с форума))</div><div class="ttdef"><b>Definition:</b> SHA_256.h:116</div></div>
<div class="ttc" id="anamespace_mafia_1_1_database_html_a729b70e8feb11b7f1d338f870b47150a"><div class="ttname"><a href="namespace_mafia_1_1_database.html#a729b70e8feb11b7f1d338f870b47150a">Mafia::Database::BEGINNING_TIME</a></div><div class="ttdeci">const QDateTime BEGINNING_TIME</div><div class="ttdoc">Время, которое мы считаем 'самым началом' (раньше него не может быть ничего)</div><div class="ttdef"><b>Definition:</b> user.h:13</div></div>
<div class="ttc" id="a_s_h_a__256_8h_html"><div class="ttname"><a href="_s_h_a__256_8h.html">SHA_256.h</a></div></div>
<div class="ttc" id="astruct_mafia_1_1_database_1_1_transaction_html"><div class="ttname"><a href="struct_mafia_1_1_database_1_1_transaction.html">Mafia::Database::Transaction</a></div><div class="ttdoc">Структура, используемая для хранения и работы с транзакциями</div><div class="ttdef"><b>Definition:</b> user.h:99</div></div>
<div class="ttc" id="aclass_mafia_1_1_database_1_1_database_manager_html_a01862e5fdbcad75efcd13771b700ea2c"><div class="ttname"><a href="class_mafia_1_1_database_1_1_database_manager.html#a01862e5fdbcad75efcd13771b700ea2c">Mafia::Database::DatabaseManager::dbName</a></div><div class="ttdeci">const QString dbName</div><div class="ttdoc">Имя таблицы</div><div class="ttdef"><b>Definition:</b> databasemanager.h:24</div></div>
<div class="ttc" id="anamespace_mafia_html"><div class="ttname"><a href="namespace_mafia.html">Mafia</a></div><div class="ttdoc">Набор системных функций для запуска и завершения программ</div><div class="ttdef"><b>Definition:</b> chatdatabasemanager.h:9</div></div>
<div class="ttc" id="aclass_mafia_1_1_database_1_1_transaction_database_manager_html_a36106fbdabbf3bb721a2dbe3f0c5e727"><div class="ttname"><a href="class_mafia_1_1_database_1_1_transaction_database_manager.html#a36106fbdabbf3bb721a2dbe3f0c5e727">Mafia::Database::TransactionDatabaseManager::get_request_transactions</a></div><div class="ttdeci">MafiaList&lt; Transaction &gt; get_request_transactions(QSqlQuery *query)</div><div class="ttdoc">Получение списка всех транзакций из sql-запроса</div><div class="ttdef"><b>Definition:</b> transactiondatabasemanager.cpp:258</div></div>
<div class="ttc" id="anamespace_mafia_1_1_database_html_a27099f0ff3ecafb2af885e198cee1495"><div class="ttname"><a href="namespace_mafia_1_1_database.html#a27099f0ff3ecafb2af885e198cee1495">Mafia::Database::TransactionType</a></div><div class="ttdeci">TransactionType</div><div class="ttdoc">Тип транзакции (на случай разных транзакций - оплат, возвратов и т.п.)</div><div class="ttdef"><b>Definition:</b> user.h:75</div></div>
<div class="ttc" id="anamespace_mafia_1_1_database_html_aa032e646da93d30f80ea9a10f0488504"><div class="ttname"><a href="namespace_mafia_1_1_database.html#aa032e646da93d30f80ea9a10f0488504">Mafia::Database::TransactionIdType</a></div><div class="ttdeci">int TransactionIdType</div><div class="ttdoc">Тип, использующися для id транзакций в базе данных</div><div class="ttdef"><b>Definition:</b> user.h:23</div></div>
<div class="ttc" id="aclass_mafia_1_1_database_1_1_transaction_database_manager_html"><div class="ttname"><a href="class_mafia_1_1_database_1_1_transaction_database_manager.html">Mafia::Database::TransactionDatabaseManager</a></div><div class="ttdoc">Основной класс для работы с БД транзакций</div><div class="ttdef"><b>Definition:</b> transactiondatabasemanager.h:9</div></div>
<div class="ttc" id="aclass_mafia_1_1_database_1_1_database_manager_html_a31d0a66a2bc96dd477c37f0dcc1ec0ce"><div class="ttname"><a href="class_mafia_1_1_database_1_1_database_manager.html#a31d0a66a2bc96dd477c37f0dcc1ec0ce">Mafia::Database::DatabaseManager::localParameter</a></div><div class="ttdeci">const QString localParameter</div><div class="ttdoc">Локальный параметр хеширования</div><div class="ttdef"><b>Definition:</b> databasemanager.h:22</div></div>
<div class="ttc" id="aclass_mafia_1_1_database_1_1_transaction_database_manager_html_ae1d3a6574ea868afcbf1916380b44a42"><div class="ttname"><a href="class_mafia_1_1_database_1_1_transaction_database_manager.html#ae1d3a6574ea868afcbf1916380b44a42">Mafia::Database::TransactionDatabaseManager::get_all_transactions</a></div><div class="ttdeci">MafiaList&lt; Transaction &gt; get_all_transactions()</div><div class="ttdoc">Функция получения всех транзакций</div><div class="ttdef"><b>Definition:</b> transactiondatabasemanager.cpp:105</div></div>
<div class="ttc" id="aclass_mafia_1_1_database_1_1_database_manager_html_a7df3cb1cc851c6eb410294016647a29c"><div class="ttname"><a href="class_mafia_1_1_database_1_1_database_manager.html#a7df3cb1cc851c6eb410294016647a29c">Mafia::Database::DatabaseManager::dbWorker</a></div><div class="ttdeci">DatabaseWorker * dbWorker</div><div class="ttdoc">Указатель на объект для работы с базой данных</div><div class="ttdef"><b>Definition:</b> databasemanager.h:20</div></div>
<div class="ttc" id="adatabasehelper_8h_html"><div class="ttname"><a href="databasehelper_8h.html">databasehelper.h</a></div></div>
<div class="ttc" id="aclass_mafia_1_1_database_1_1_transaction_database_manager_html_acdfa98f25e9e8680453aaa2e555183ce"><div class="ttname"><a href="class_mafia_1_1_database_1_1_transaction_database_manager.html#acdfa98f25e9e8680453aaa2e555183ce">Mafia::Database::TransactionDatabaseManager::hashCheckingInterval</a></div><div class="ttdeci">static const int hashCheckingInterval</div><div class="ttdoc">Временной интервал в мс через который проверяется БД на совпадение хешей</div><div class="ttdef"><b>Definition:</b> transactiondatabasemanager.h:82</div></div>
<div class="ttc" id="aclass_mafia_1_1_database_1_1_transaction_database_manager_html_ac91e237790cb6ecb4cafb4d7f65a6205"><div class="ttname"><a href="class_mafia_1_1_database_1_1_transaction_database_manager.html#ac91e237790cb6ecb4cafb4d7f65a6205">Mafia::Database::TransactionDatabaseManager::get_time_bounded_transactions</a></div><div class="ttdeci">MafiaList&lt; Transaction &gt; get_time_bounded_transactions(QDateTime after=BEGINNING_TIME, QDateTime before=ENDING_TIME)</div><div class="ttdoc">Функция получения всех транзакций, проведенных в определенный временной интервал</div><div class="ttdef"><b>Definition:</b> transactiondatabasemanager.cpp:177</div></div>
<div class="ttc" id="astruct_mafia_1_1_database_1_1_transaction_html_a498bf893b4fbadf5df3b807b1542dc2d"><div class="ttname"><a href="struct_mafia_1_1_database_1_1_transaction.html#a498bf893b4fbadf5df3b807b1542dc2d">Mafia::Database::Transaction::buyer</a></div><div class="ttdeci">UserIdType buyer</div><div class="ttdoc">id пользователя, который является плательщиком</div><div class="ttdef"><b>Definition:</b> user.h:103</div></div>
<div class="ttc" id="aclass_mafia_1_1_database_1_1_transaction_database_manager_html_aa35f53e9225e4a551fd6fa22ef48dcb5"><div class="ttname"><a href="class_mafia_1_1_database_1_1_transaction_database_manager.html#aa35f53e9225e4a551fd6fa22ef48dcb5">Mafia::Database::TransactionDatabaseManager::check_transaction_hashes</a></div><div class="ttdeci">void check_transaction_hashes()</div><div class="ttdoc">Функция, которая запускается автоматически и каждые несколько секунд проверяет, не изменена ли какая-...</div><div class="ttdef"><b>Definition:</b> transactiondatabasemanager.cpp:196</div></div>
<div class="ttc" id="aclass_mafia_1_1_database_1_1_database_worker_html"><div class="ttname"><a href="class_mafia_1_1_database_1_1_database_worker.html">Mafia::Database::DatabaseWorker</a></div><div class="ttdoc">Класс, отвечающий за создание, поддержку резервное копирование и выполнение sql запросов базы данных</div><div class="ttdef"><b>Definition:</b> databaseworker.h:19</div></div>
<div class="ttc" id="aclass_mafia_1_1_database_1_1_database_worker_html_af0ac6356d71ff81e472be1d969b8bfdb"><div class="ttname"><a href="class_mafia_1_1_database_1_1_database_worker.html#af0ac6356d71ff81e472be1d969b8bfdb">Mafia::Database::DatabaseWorker::database_open</a></div><div class="ttdeci">bool database_open()</div><div class="ttdoc">Функция проверки открыта ли сейчас БД</div><div class="ttdef"><b>Definition:</b> databaseworker.cpp:44</div></div>
<div class="ttc" id="aclass_mafia_1_1_database_1_1_database_worker_html_a9189655e4f744af5bb8a83735457d58c"><div class="ttname"><a href="class_mafia_1_1_database_1_1_database_worker.html#a9189655e4f744af5bb8a83735457d58c">Mafia::Database::DatabaseWorker::restore_database</a></div><div class="ttdeci">void restore_database()</div><div class="ttdef"><b>Definition:</b> databaseworker.cpp:75</div></div>
<div class="ttc" id="astruct_mafia_1_1_database_1_1_transaction_html_a0aeb838a88fac117a0dc2178e73251ab"><div class="ttname"><a href="struct_mafia_1_1_database_1_1_transaction.html#a0aeb838a88fac117a0dc2178e73251ab">Mafia::Database::Transaction::hash</a></div><div class="ttdeci">QString hash</div><div class="ttdoc">Хеш транзакции, чтобы ее было сложнее подменить или вставить среди других транзакций</div><div class="ttdef"><b>Definition:</b> user.h:107</div></div>
<div class="ttc" id="aclass_mafia_1_1_database_1_1_transaction_database_manager_html_ae4f250a52ca9f1a1fe7abeb03bab7880"><div class="ttname"><a href="class_mafia_1_1_database_1_1_transaction_database_manager.html#ae4f250a52ca9f1a1fe7abeb03bab7880">Mafia::Database::TransactionDatabaseManager::on_database_cracked</a></div><div class="ttdeci">void on_database_cracked()</div><div class="ttdoc">Функция, вызываемая в случае обнаружения несовпадения хешей и, соответственно, взлома БД....</div><div class="ttdef"><b>Definition:</b> transactiondatabasemanager.cpp:227</div></div>
<div class="ttc" id="anamespace_mafia_1_1_database_html_ab42c0ff51241aae191094adfd24334d1"><div class="ttname"><a href="namespace_mafia_1_1_database.html#ab42c0ff51241aae191094adfd24334d1">Mafia::Database::UserIdType</a></div><div class="ttdeci">int UserIdType</div><div class="ttdoc">Тип, использующийся для id пользователей в базе данных</div><div class="ttdef"><b>Definition:</b> user.h:19</div></div>
<div class="ttc" id="aclass_mafia_1_1_system_1_1_string_html"><div class="ttname"><a href="class_mafia_1_1_system_1_1_string.html">Mafia::System::String</a></div><div class="ttdoc">The String class упрощенная строка (мне просто страшно использовать QString или std::string,...</div><div class="ttdef"><b>Definition:</b> simplestring.h:13</div></div>
<div class="ttc" id="auser_8h_html"><div class="ttname"><a href="user_8h.html">user.h</a></div></div>
<div class="ttc" id="aclass_mafia_1_1_database_1_1_database_worker_html_a77bf26edac421999293650a9d6a5c302"><div class="ttname"><a href="class_mafia_1_1_database_1_1_database_worker.html#a77bf26edac421999293650a9d6a5c302">Mafia::Database::DatabaseWorker::run_query</a></div><div class="ttdeci">QSqlQuery * run_query(QString request)</div><div class="ttdoc">Функция, выполняющая строковой Sql запрос</div><div class="ttdef"><b>Definition:</b> databaseworker.cpp:49</div></div>
<div class="ttc" id="aclass_mafia_1_1_database_1_1_transaction_database_manager_html_a655539012fa580510df277a684209c46"><div class="ttname"><a href="class_mafia_1_1_database_1_1_transaction_database_manager.html#a655539012fa580510df277a684209c46">Mafia::Database::TransactionDatabaseManager::add_transaction</a></div><div class="ttdeci">TransactionIdType add_transaction(UserIdType userId, PriceType price, TransactionType type)</div><div class="ttdoc">Функция добавления новой транзакции в БД</div><div class="ttdef"><b>Definition:</b> transactiondatabasemanager.cpp:48</div></div>
<div class="ttc" id="anamespace_mafia_1_1_exceptions_html_adb5aef3f5d6c5e255f7a75e6fabbfe27ad335c49f5fc40222776e8c5bef642d96"><div class="ttname"><a href="namespace_mafia_1_1_exceptions.html#adb5aef3f5d6c5e255f7a75e6fabbfe27ad335c49f5fc40222776e8c5bef642d96">Mafia::Exceptions::DatabaseWorkingExceptionId_SQlQuery</a></div><div class="ttdeci">@ DatabaseWorkingExceptionId_SQlQuery</div><div class="ttdoc">Исключение, вызываемое при ошибке в sql-запросе</div><div class="ttdef"><b>Definition:</b> databaseworkingexception.h:39</div></div>
<div class="ttc" id="adatabaseworkingexception_8h_html"><div class="ttname"><a href="databaseworkingexception_8h.html">databaseworkingexception.h</a></div></div>
<div class="ttc" id="adatabaseworker_8h_html_a294410b213914d2cacf150fe37098733"><div class="ttname"><a href="databaseworker_8h.html#a294410b213914d2cacf150fe37098733">NOT_NULL</a></div><div class="ttdeci">#define NOT_NULL</div><div class="ttdoc">Sql команда для обозначения переменной, которой нельзя присвоить неинициализированное значение</div><div class="ttdef"><b>Definition:</b> databaseworker.h:8</div></div>
<div class="ttc" id="aclass_mafia_1_1_exceptions_1_1_exception_html"><div class="ttname"><a href="class_mafia_1_1_exceptions_1_1_exception.html">Mafia::Exceptions::Exception</a></div><div class="ttdoc">Базовый класс для ошибок. Его экземпляры создавать нельзя, но все классы ошибок должны наследоваться ...</div><div class="ttdef"><b>Definition:</b> exception.h:15</div></div>
<div class="ttc" id="aclass_mafia_1_1_database_1_1_transaction_database_manager_html_ad656f78044b12ee27f416383586558f4"><div class="ttname"><a href="class_mafia_1_1_database_1_1_transaction_database_manager.html#ad656f78044b12ee27f416383586558f4">Mafia::Database::TransactionDatabaseManager::TransactionDatabaseManager</a></div><div class="ttdeci">TransactionDatabaseManager(DatabaseWorker *databaseWorker)</div><div class="ttdoc">Основной конструктор, который создает, если надо, и связывается с БД и конкретной таблицей</div><div class="ttdef"><b>Definition:</b> transactiondatabasemanager.cpp:15</div></div>
<div class="ttc" id="astruct_mafia_1_1_database_1_1_transaction_html_ab3639a56158c67412d85b822e4f3d50e"><div class="ttname"><a href="struct_mafia_1_1_database_1_1_transaction.html#ab3639a56158c67412d85b822e4f3d50e">Mafia::Database::Transaction::price</a></div><div class="ttdeci">PriceType price</div><div class="ttdoc">цена, которая была уплачена</div><div class="ttdef"><b>Definition:</b> user.h:105</div></div>
<div class="ttc" id="astruct_mafia_1_1_database_1_1_transaction_html_a0bf9a749b9933461bc5c527994b94494"><div class="ttname"><a href="struct_mafia_1_1_database_1_1_transaction.html#a0bf9a749b9933461bc5c527994b94494">Mafia::Database::Transaction::type</a></div><div class="ttdeci">TransactionType type</div><div class="ttdoc">Тип транзакции (см. Mafia::Database::TransactionType)</div><div class="ttdef"><b>Definition:</b> user.h:111</div></div>
<div class="ttc" id="aclass_mafia_1_1_exceptions_1_1_exception_html_aa13b69aad45b421508d39b09e48a2ef4"><div class="ttname"><a href="class_mafia_1_1_exceptions_1_1_exception.html#aa13b69aad45b421508d39b09e48a2ef4">Mafia::Exceptions::Exception::get_id</a></div><div class="ttdeci">virtual ExceptionIdType get_id()</div><div class="ttdoc">Взятие параметра id.</div><div class="ttdef"><b>Definition:</b> exception.cpp:27</div></div>
<div class="ttc" id="atransactiondatabasemanager_8h_html"><div class="ttname"><a href="transactiondatabasemanager_8h.html">transactiondatabasemanager.h</a></div></div>
<div class="ttc" id="aclass_mafia_1_1_exceptions_1_1_database_working_exception_html"><div class="ttname"><a href="class_mafia_1_1_exceptions_1_1_database_working_exception.html">Mafia::Exceptions::DatabaseWorkingException</a></div><div class="ttdoc">Класс для описания исключений работы с БД</div><div class="ttdef"><b>Definition:</b> databaseworkingexception.h:12</div></div>
<div class="ttc" id="adatabasemanager_8h_html"><div class="ttname"><a href="databasemanager_8h.html">databasemanager.h</a></div></div>
<div class="ttc" id="astruct_mafia_1_1_database_1_1_transaction_html_a62c3cf04821af5a62715cd63834f6edf"><div class="ttname"><a href="struct_mafia_1_1_database_1_1_transaction.html#a62c3cf04821af5a62715cd63834f6edf">Mafia::Database::Transaction::id</a></div><div class="ttdeci">TransactionIdType id</div><div class="ttdoc">id транзакции</div><div class="ttdef"><b>Definition:</b> user.h:101</div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Создано системой &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.18
</small></address>
</body>
</html>
